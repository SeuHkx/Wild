!function(e,t){"use strict";"function"==typeof define&&define.amd&&define([],function(){return t.call(e)}),"object"==typeof exports&&"object"==typeof module?module.exports=t.call(e):e.sugarTpl=t.call(e,document)}("object"==typeof global?global:window,function(){"use strict";var e,t={evaluate:/(\{@)|(@\/\w+\})/g,tagStart:/(\{@)/g,tagClose:/(\}@\/\w+\})/g,tagConnection:/(\})@\/\w+.\{@(\w+)(\{)/g,connection:/\}@\/\w+\}\{@\w+\{/g,sentenceStart:/\{@(.\w+.+)/g,sentenceEnd:/\}@\/\w+./g,variant:/\$\{([\s\S]*?)\}/g,variantExp:/^\${|}/g,codeExp:function(e){return new RegExp(e+"\\.","g")},codeExpCache:null},n=function(e,n){if("undefined"!=typeof n&&"string"==typeof n){var r=new RegExp(n+"\\{([\\s\\S]*?)\\}","g"),a=new RegExp("^"+n+"{|}","g");t.variant=r,t.variantExp=a}this.template=e.replace(/(^\s+)|(\s+$)/g,"")};n.fn=n.prototype,n.fn.version="0.0.1",n.extend=function(){var e=[].slice.call(arguments);if("object"!=typeof e[0])return e[0];for(var t in e[1])e[0][t]="object"==typeof e[1][t]?this.extend(e[1][t]):e[1][t]};var r={_cache:null,_parser:function(e){var n,r,a=t,r=this.template.replace(/\{+\{/g,"{").replace(/\}\}+/g,"}").replace(/\\/g,"\\\\").replace(/(?="|')/g,"\\").replace(/(\}@\/\w+\})(\s)(\{@\w+)(\s)(\{)/g,"$1$3$5").replace(/(\}@\/\w+\})(\s)(\{@\w+\{)/g,"$1$3").replace(/(\}@\/\w+\})(\s)(\{@\w+)(\s)(\{)/g,"$1$3$5").replace(/(\}@\/\w+\})(\{@\w+)(\s)(\{)/g,"$1$2$4").replace(a.connection,function(e){return e=e.replace(a.tagConnection,'";$1$2$3'),e+';sugarBuildTemplate +="'}).replace(a.tagStart,'";$1').replace(/\{@+/g," {@ ").replace(a.sentenceStart,function(e){return e.replace(/\\/g,"")+';sugarBuildTemplate +="'}).replace(a.tagClose,'";$1').replace(a.sentenceEnd,function(e){return e+';sugarBuildTemplate +="'}).replace(a.evaluate,"").replace(a.variant,function(e){return e=e.replace(a.variantExp,""),a.codeExpCache=e.split(".")[0],'"+'+e.replace(/\\/g,"")+'+"'}).replace(a.codeExp(a.codeExpCache),"data.").replace(/[\r\n\t]/g," ");r=' "use strict"; var sugarBuildTemplate = "'+r+'"; return sugarBuildTemplate;';try{return this._cache=n=new Function("data",r),n(e)}catch(c){return'<h3>SugarTpl Error:</h3><h4 style="color: red;">'+c.message+"</h4>"}},compile:function(e,t){var n;return n=this._cache?this._cache(e):this._parser(e),t&&t(n),n}};return n.extend(n.fn,r),e=function(e,t){return""===e||"string"!=typeof e?!1:new n(e,t)}});